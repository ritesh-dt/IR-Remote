<LayoutIconButton>:
	size_hint: None, None
	size: 30, 30
	user_font_size: 64

<MDRaisedButton>:
	on_release: app.play(self.text)
<MDFlatButton>:
	on_release: app.play(self.text)

<OneLineItemDrawer>:
	IconLeftWidget:
		id: icon
		icon: root.icon
<TwoLineItemDrawer>:
	nav_drawer: None
	remoteId: -1
	on_release:
		app.transition("Remote", "left", self.secondary_text, root.remoteId)
		root.nav_drawer.set_state("close")
	IconLeftWidget:
		id: icon
		icon: root.icon

<ContentNavigationDrawer>:
	ScrollView:
		MDList:
			id: md_list
			OneLineItemDrawer:
				text: "Add a new remote"
				icon: "plus"
				on_release: 
					app.transition("Add a new remote", "left")
					root.nav_drawer.set_state("close")

<LayoutMusic>:
	GridLayout:
		id: top_layout
		size_hint: (0.9, None)
		height: self.minimum_height
		pos_hint: {"center_x": 0.5, "top":0.98}
		cols: 4
		spacing: 10
		MDFlatButton:
			size_hint_x: 1/top_layout.cols
			text: "Power"
		MDRaisedButton:
			size_hint_x: 1/top_layout.cols
			text: "Mode"
		MDRaisedButton:
			size_hint_x: 1/top_layout.cols
			text: "Clock"
		MDRaisedButton:
			size_hint_x: 1/top_layout.cols
			text: "Mute"
	MDIconButton:
		icon: "play"
		pos_hint: {"center_x": 0.5, "center_y":0.5}
		user_font_size: "36sp"
	MDIconButton:
		icon: "arrow-left"
		pos_hint: {"center_x": 0.3, "center_y":0.5}
	MDIconButton:
		icon: "arrow-right"
		pos_hint: {"center_x": 0.7, "center_y":0.5}
	MDIconButton:
		icon: "arrow-up"
		pos_hint: {"center_x": 0.5, "center_y":0.6}
	MDIconButton:
		icon: "arrow-down"
		pos_hint: {"center_x": 0.5, "center_y":0.4}
	GridLayout:
		id: middle_layout
		size_hint: (0.9, 0.1)
		pos_hint: {"center_x": 0.5, "y":0.15}
		cols: 4
		spacing: 10
		MDRaisedButton:
			size_hint_x: 1/middle_layout.cols
			text: "Play"
		MDRaisedButton:
			size_hint_x: 1/middle_layout.cols
			text: "Next"
		MDRaisedButton:
			size_hint_x: 1/middle_layout.cols
			text: "Prev"
		MDRaisedButton:
			size_hint_x: 1/middle_layout.cols
			text: "Eject"
	GridLayout:
		id: down_layout
		size_hint: (0.9, 0.1)
		pos_hint: {"center_x": 0.5, "y":0.05}
		cols: 2
		spacing: 10
		MDRaisedButton:
			size_hint_x: 1/down_layout.cols
			text: "Vol-"
		MDRaisedButton:
			size_hint_x: 1/down_layout.cols
			text: "Vol+"

<LayoutTV>:
	GridLayout:
		id: top_layout
		size_hint: (0.95, 0.1)
		pos_hint: {"center_x": 0.5, "top":0.95}
		cols: 4
		spacing: 10
		MDFlatButton:
			size_hint_x: 1/top_layout.cols
			text: "Power"
		MDRaisedButton:
			size_hint_x: 1/top_layout.cols
			text: "Mute"
		MDRaisedButton:
			size_hint_x: 1/top_layout.cols
			text: "Menu"
		MDRaisedButton:
			size_hint_x: 1/top_layout.cols
			text: "Source"
	FloatLayout:
		size_hint: (0.95, 0.25)
		pos_hint: {"center_x": 0.5, "top":0.85}
		MDRaisedButton:
			icon: "arrow-up"
			pos_hint:{'center_x':0.25, 'top':0.95}
		MDRaisedButton:
			icon: "arrow-down"
			pos_hint:{'center_x':0.25, 'y':0.05}
		MDRaisedButton:
			icon: "volume-minus"
			pos_hint:{'center_x': 0.75, 'top': 0.95}
		MDRaisedButton:
			icon: "volume-plus"
			pos_hint:{'center_x': 0.75, 'y': 0.05}
	GridLayout:
		id: numeric_layout
		size_hint: (0.95, None)
		height: self.minimum_height
		pos_hint: {"center_x": 0.5, "y":0.05}
		cols: 3
		spacing: 10
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "1"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "2"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "3"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "4"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "5"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "6"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "7"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "8"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "9"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "-"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "0"
		MDFlatButton:
			size_hint_x: 1/numeric_layout.cols
			text: "Pre-Ch"


<RootScreenManager>:
	title: ""
	currentRemote: -1
	currentCaption: ""
	Screen:
		name: "main_screen"
		MDToolbar:
			id: md_toolbar
			pos_hint: {"top": 1}
			title: root.title
			left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
			right_action_items: [["square-edit-outline", lambda x: app.transition("Edit remote details", "right")]] if screen_manager.current ==  'Remote' else [["help", lambda x: None]]
			size_hint: (1, 0.1)
			elevation: 0

		NavigationLayout:
			ScreenManager:
				id: screen_manager
				Screen:
					id: remote_screen
					name: "Remote"
				Screen:
					name: "Add a new remote"	
					MDLabel:
						pos_hint: {"x":0.05, "top":0.85}
						size_hint: (0.4, 0.05)
						text: "Appliance: "
						halign: "center"
					MDDropDownItem:
						id: appliance_dropdown
						pos_hint: {"x":0.5, "top":0.85}
						items: []
						dropdown_bg: [1, 1, 1, 1]
						on_select: app.findItems("appliance", self.current_item)
					MDLabel:
						pos_hint: {"x":0.05, "top":0.75}
						size_hint: (0.4, 0.05)
						text: "Brand: "
						halign: "center"
					MDDropDownItem:
						id: brand_dropdown
						pos_hint: {"x":0.5, "top":0.75}
						items: []
						dropdown_bg: [1, 1, 1, 1]
						on_select: app.findItems("brand", f"{root.ids.appliance_dropdown.current_item}/{self.current_item}")
					MDLabel:
						pos_hint: {"x":0.05, "top":0.65}
						size_hint: (0.4, 0.05)
						text: "Model: "
						halign: "center"
					MDDropDownItem:
						id: model_dropdown
						pos_hint: {"x":0.5, "top":0.65}
						items: []
						dropdown_bg: [1, 1, 1, 1]
					MDLabel:
						pos_hint: {"x":0.05, "top":0.55}
						size_hint: (0.4, 0.1)
						text: "Name: "
						halign: "center"
					MDTextField:
						id: name_field
						size_hint: (0.5, 0.1)
						required: True
						pos_hint: {"x":0.45, "top":0.55}
					MDRaisedButton:
						text: "Add"
						pos_hint: {"center_x":0.5, "top":0.45}
						on_release: app.findItems("add", f"{root.ids.appliance_dropdown.current_item}/{root.ids.brand_dropdown.current_item}/{root.ids.model_dropdown.current_item}", caption=name_field.text)

				Screen:
					name: "Edit remote details"
					MDLabel:
						pos_hint: {"x": 0.05, "top":0.85}
						size_hint: (0.2, 0.1)
						text: "Caption: "
					MDTextField:
						id: caption_field
						pos_hint: {"x": 0.25, "top":0.85}
						size_hint: (0.65, 0.1)
						multiline: False
						text: root.currentCaption
					MDRaisedButton:
						pos_hint: {"center_x": 0.5, "top":0.75}
						text: "Save"
						on_release:
							app.save(caption_field.text)
					MDRaisedButton:
						pos_hint: {"center_x": 0.5, "top":0.6}
						text: "Delete remote"
						#md_bg_color: (1, 0, 0)
						on_release:
							app.delete_remote()

				Screen:
					name: "No added remotes..."
					MDLabel:
						text: "Please add a remote"
						halign: "center"



			MDNavigationDrawer:
				id: nav_drawer
				elevation: 0
				ContentNavigationDrawer:
					id: content_nav_drawer
					nav_drawer: nav_drawer

		